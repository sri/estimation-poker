<head>
  <title>scrum-poker</title>
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" />
</head>

<body>
  <div class="container">
   {{> user}}
   {{> points}}

   {{> epics}}
  </div>
  <footer class="footer">
    <div class="container">
      <p class="text-muted">by <a href="https://twitter.com/s_thai">@s_thai</a></p>
    </div>
  </footer>
</body>

<template name="points">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Points</h3>
    </div>
    <div class="panel-body">
      <div class="btn-group points" role="group">
        <button type="button" class="btn btn-default point">2</button>
        <button type="button" class="btn btn-default point">3</button>
        <button type="button" class="btn btn-default point">5</button>
        <button type="button" class="btn btn-default point">8</button>
        <button type="button" class="btn btn-default point">13</button>
      </div>
    </div>
  </div>
</template>

<template name="user">
  <div class="user">
    {{#if user}}
      <h2><span class="label label-info">{{user}}</span></h2>
    {{else}}
      <div class="page-header">
        <h1>Scrum.poker()</h1>
      </div>
      <form>
        <div class="input-group">
          <input type="text" class="form-control" name="username" placeholder="Name"/>
          <span class="input-group-btn">
            <input type="submit" class="btn btn-default" value="Join Session">
          </span>
        </div>
      </form>
    {{/if}}
  </div>
</template>

<template name="epics">
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Epics</h3>
    </div>
    <div class="panel-body">
      {{#with openEpic}}
        <div class="epic open-epic">
          {{> votes id=_id}}
          <button type="button" class="close" title="Close">&times;</button>
        </div>
      {{/with}}

      {{#each closedEpics}}
        <div class="epic closed-epic">
          {{> votes id=_id}}
        </div>
      {{/each}}
    </div>
  </div>
</template>

<template name="votes">
  <ul class="list-group">
    {{#each votes id}}
      <li class="list-group-item">
        <span class="badge">{{points}}</span>
        {{by}}
      </li>
    {{/each}}
   <!-- <li class="list-group-item">
      <span class="badge">{{avg id}}</span>
      Avg
    </li> -->
  </ul>
</template>

